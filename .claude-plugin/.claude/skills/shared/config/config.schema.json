{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://github.com/confluence-assistant-skills/config.schema.json",
  "title": "Confluence Assistant Skills Configuration",
  "description": "Configuration schema for Confluence Assistant Skills",
  "type": "object",
  "properties": {
    "confluence": {
      "type": "object",
      "description": "Confluence configuration section",
      "properties": {
        "default_profile": {
          "type": "string",
          "description": "Name of the default profile to use",
          "default": "default"
        },
        "url": {
          "type": "string",
          "description": "Confluence Cloud URL (e.g., https://your-site.atlassian.net)",
          "format": "uri",
          "pattern": "^https://.+\\.atlassian\\.net$"
        },
        "email": {
          "type": "string",
          "description": "Email address for authentication",
          "format": "email"
        },
        "api_token": {
          "type": "string",
          "description": "API token for authentication (DO NOT commit to version control)"
        },
        "profiles": {
          "type": "object",
          "description": "Named configuration profiles",
          "additionalProperties": {
            "$ref": "#/definitions/profile"
          }
        },
        "api": {
          "$ref": "#/definitions/apiSettings"
        }
      },
      "additionalProperties": false
    }
  },
  "definitions": {
    "profile": {
      "type": "object",
      "description": "A named configuration profile",
      "properties": {
        "url": {
          "type": "string",
          "description": "Confluence Cloud URL",
          "format": "uri"
        },
        "email": {
          "type": "string",
          "description": "Email address for authentication",
          "format": "email"
        },
        "api_token": {
          "type": "string",
          "description": "API token for authentication"
        },
        "default_space": {
          "type": "string",
          "description": "Default space key for operations",
          "pattern": "^[A-Z][A-Z0-9_]*$"
        },
        "space_keys": {
          "type": "array",
          "description": "List of space keys this profile has access to",
          "items": {
            "type": "string",
            "pattern": "^[A-Z][A-Z0-9_]*$"
          }
        }
      },
      "additionalProperties": false
    },
    "apiSettings": {
      "type": "object",
      "description": "API client settings",
      "properties": {
        "version": {
          "type": "string",
          "description": "Preferred API version",
          "enum": ["1", "2"],
          "default": "2"
        },
        "timeout": {
          "type": "integer",
          "description": "Request timeout in seconds",
          "minimum": 1,
          "maximum": 300,
          "default": 30
        },
        "max_retries": {
          "type": "integer",
          "description": "Maximum number of retry attempts",
          "minimum": 0,
          "maximum": 10,
          "default": 3
        },
        "retry_backoff": {
          "type": "number",
          "description": "Backoff multiplier for retries",
          "minimum": 1.0,
          "maximum": 10.0,
          "default": 2.0
        },
        "verify_ssl": {
          "type": "boolean",
          "description": "Whether to verify SSL certificates",
          "default": true
        }
      },
      "additionalProperties": false
    }
  },
  "additionalProperties": true
}
